import React, { useState, useEffect, useRef } from 'react';
import { ShoppingCart, Heart, X, ArrowUp, MessageCircle } from 'lucide-react';

const App = () => {
  // State management
  const [activeTab, setActiveTab] = useState('home');
  const [cart, setCart] = useState([]);
  const [wishlist, setWishlist] = useState([]);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [showCart, setShowCart] = useState(false);
  const [flashSaleItems, setFlashSaleItems] = useState([]);
  const [timeLeft, setTimeLeft] = useState({ hours: 24, minutes: 0, seconds: 0 });
  
  // Refs for category sections
  const tvSectionRef = useRef(null);
  const phoneSectionRef = useRef(null);
  const kitchenSectionRef = useRef(null);
  const laptopSectionRef = useRef(null);
  
  // Product data
  const categories = [
    {
      id: 'tvs',
      title: 'üì∫ Smart TVs & Audio Systems',
      brands: 'Partners: TCL, Hisense, Vitron, Globalstar',
      ref: tvSectionRef
    },
    {
      id: 'phones',
      title: 'üì± Smartphones (MKOPA Available)',
      brands: 'Brands: Samsung, Nokia, Xiaomi, Tecno',
      ref: phoneSectionRef
    },
    {
      id: 'kitchen',
      title: 'üç≥ Kitchen & Home Appliances',
      brands: 'Ailyons, Ramtons, Von',
      ref: kitchenSectionRef
    },
    {
      id: 'laptops',
      title: 'üíª Laptops & Computing',
      brands: 'HP, Lenovo, Dell (Refurbished & New)',
      ref: laptopSectionRef
    }
  ];

  // Generate product data
  const generateProducts = (category, count) => {
    const products = [];
    const brands = {
      tvs: ['Vitron', 'Hisense', 'TCL', 'Globalstar', 'Sony'],
      phones: ['Samsung', 'Nokia', 'Xiaomi', 'Tecno'],
      kitchen: ['Ailyons', 'Ramtons', 'Von'],
      laptops: ['HP', 'Lenovo', 'Dell']
    };
    
    const basePrices = {
      tvs: [12500, 34000, 58500, 9500, 28000, 6500],
      phones: [21500, 18000, 25000, 15500],
      kitchen: [18500, 4500, 3200],
      laptops: [23500, 19000, 48000]
    };
    
    const descriptions = {
      tvs: "Experience crystal-clear visuals and immersive sound with this premium smart TV. Features include Android OS, 4K resolution, and built-in streaming apps.",
      phones: "Powerful smartphone with long battery life, high-resolution camera, and smooth performance. Perfect for everyday use and productivity.",
      kitchen: "High-quality home appliance designed for efficiency and durability. Modern features make daily tasks easier and more enjoyable.",
      laptops: "Reliable computing device with fast processing, ample storage, and long battery life. Ideal for work, study, and entertainment."
    };
    
    const specs = {
      tvs: ["4K UHD Resolution", "HDR10 Support", "Voice Remote", "3 HDMI Ports", "Built-in WiFi"],
      phones: ["6.5\" Display", "5000mAh Battery", "128GB Storage", "Quad Camera", "Fingerprint Sensor"],
      kitchen: ["Energy Efficient", "Stainless Steel", "Auto Shut-off", "Multiple Settings", "Easy Clean"],
      laptops: ["Intel i5/i7 Processor", "8-16GB RAM", "256-512GB SSD", "14\" FHD Display", "Windows 11"]
    };
    
    for (let i = 0; i < count; i++) {
      const brandIndex = i % brands[category].length;
      const priceIndex = i % basePrices[category].length;
      const isMkopa = category === 'phones' && i % 3 === 0;
      const originalPrice = basePrices[category][priceIndex] + Math.floor(Math.random() * 5000);
      
      products.push({
        id: `${category}-${i}`,
        name: `${brands[category][brandIndex]} ${category === 'tvs' ? `${Math.floor(32 + Math.random() * 24)}"` : ''} ${category === 'phones' ? 'Galaxy' : ''} ${category === 'kitchen' ? 'Appliance' : ''} ${category === 'laptops' ? 'EliteBook' : ''} ${Math.floor(10 + Math.random() * 90)}`,
        brand: brands[category][brandIndex],
        price: originalPrice,
        originalPrice: originalPrice,
        description: descriptions[category],
        specs: specs[category],
        isMkopa: isMkopa,
        isFlashSale: false,
        category: category
      });
    }
    
    // Select one random item for flash sale
    const flashItemIndex = Math.floor(Math.random() * products.length);
    products[flashItemIndex].isFlashSale = true;
    products[flashItemIndex].price = Math.max(500, products[flashItemIndex].originalPrice - 500);
    
    return products;
  };
  
  const [products, setProducts] = useState({
    tvs: generateProducts('tvs', 20),
    phones: generateProducts('phones', 20),
    kitchen: generateProducts('kitchen', 20),
    laptops: generateProducts('laptops', 20)
  });
  
  // Set flash sale items
  useEffect(() => {
    const flashItems = [];
    Object.values(products).forEach(category => {
      const flashItem = category.find(p => p.isFlashSale);
      if (flashItem) flashItems.push(flashItem);
    });
    setFlashSaleItems(flashItems);
  }, [products]);
  
  // Timer effect
  useEffect(() => {
    const timer = setInterval(() => {
      setTimeLeft(prev => {
        if (prev.hours === 0 && prev.minutes === 0 && prev.seconds === 0) {
          return { hours: 24, minutes: 0, seconds: 0 };
        }
        
        const totalSeconds = prev.hours * 3600 + prev.minutes * 60 + prev.seconds - 1;
        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        
        return { hours, minutes, seconds };
      });
    }, 1000);
    
    return () => clearInterval(timer);
  }, []);
  
  // Scroll to category
  const scrollToCategory = (ref) => {
    if (ref && ref.current) {
      ref.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  };
  
  // Cart functions
  const addToCart = (product) => {
    setCart([...cart, product]);
    setShowCart(true);
  };
  
  const removeFromCart = (index) => {
    const newCart = [...cart];
    newCart.splice(index, 1);
    setCart(newCart);
  };
  
  const toggleWishlist = (productId) => {
    if (wishlist.includes(productId)) {
      setWishlist(wishlist.filter(id => id !== productId));
    } else {
      setWishlist([...wishlist, productId]);
    }
  };
  
  // WhatsApp checkout
  const checkoutWhatsApp = () => {
    if (cart.length === 0) return;
    
    let message = "Hello Rosmatt Kenya, I want to place an order:%0a%0a";
    let total = 0;
    
    cart.forEach((item, i) => {
      message += `${i+1}. ${item.name} - KSh ${item.price}%0a`;
      total += item.price;
    });
    
    message += `%0a*TOTAL: KSh ${total.toLocaleString()}*%0a`;
    message += "-----------------------%0a";
    message += "My Delivery Location: ";
    
    window.open(`https://wa.me/254714227080?text=${message}`, '_blank');
  };
  
  // Format time for display
  const formatTime = (time) => time.toString().padStart(2, '0');
  
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Top Banner */}
      <div className="bg-gray-800 text-white text-center py-2 text-sm flex justify-center items-center gap-4">
        <span>üìû Call: 0714227080</span>
        <span>üöö Countrywide Delivery</span>
        <span>üõ°Ô∏è Authorized Dealer: TCL, Hisense, HP, Samsung</span>
      </div>
      
      {/* Header */}
      <header className="sticky top-0 z-50 bg-white shadow-md">
        <div className="container mx-auto px-4 py-3">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-blue-700">Rosmatt <span className="text-orange-500">Kenya</span></h1>
            
            <div className="flex items-center gap-4">
              <a href="tel:+254714227080" className="bg-gray-800 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center gap-1">
                üìû Call Now
              </a>
              
              <div className="relative cursor-pointer" onClick={() => setActiveTab('wishlist')}>
                <Heart className={`w-6 h-6 ${wishlist.length > 0 ? 'text-red-500 fill-current' : 'text-gray-600'}`} />
                {wishlist.length > 0 && (
                  <span className="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                    {wishlist.length}
                  </span>
                )}
              </div>
              
              <div className="relative cursor-pointer" onClick={() => setShowCart(true)}>
                <ShoppingCart className="w-6 h-6 text-blue-700" />
                {cart.length > 0 && (
                  <span className="absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                    {cart.length}
                  </span>
                )}
              </div>
            </div>
          </div>
          
          {/* Category Navigation */}
          <div className="mt-4 overflow-x-auto">
            <div className="flex space-x-4 pb-2 min-w-max">
              <button 
                onClick={() => setActiveTab('home')}
                className={`px-4 py-2 rounded-full whitespace-nowrap font-medium ${activeTab === 'home' ? 'bg-blue-700 text-white' : 'bg-gray-200 text-gray-700'}`}
              >
                Home
              </button>
              
              {categories.map(category => (
                <button
                  key={category.id}
                  onClick={() => {
                    setActiveTab('home');
                    scrollToCategory(category.ref);
                  }}
                  className="px-4 py-2 bg-white text-gray-700 rounded-full whitespace-nowrap font-medium shadow-sm hover:bg-blue-50 transition-colors"
                >
                  {category.title.split(' ')[0]}
                </button>
              ))}
              
              <button 
                onClick={() => setActiveTab('flash-sale')}
                className={`px-4 py-2 rounded-full whitespace-nowrap font-medium flex items-center gap-1 ${activeTab === 'flash-sale' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-700'}`}
              >
                ‚ö° Flash Sale
              </button>
              
              <button 
                onClick={() => setActiveTab('about')}
                className={`px-4 py-2 rounded-full whitespace-nowrap font-medium ${activeTab === 'about' ? 'bg-blue-700 text-white' : 'bg-gray-200 text-gray-700'}`}
              >
                About Founder
              </button>
              
              <button 
                onClick={() => setActiveTab('terms')}
                className={`px-4 py-2 rounded-full whitespace-nowrap font-medium ${activeTab === 'terms' ? 'bg-blue-700 text-white' : 'bg-gray-200 text-gray-700'}`}
              >
                Terms
              </button>
            </div>
          </div>
        </div>
      </header>
      
      {/* Main Content */}
      <main className="container mx-auto px-4 py-6">
        {/* Home Tab */}
        {activeTab === 'home' && (
          <>
            {/* Hero Section */}
            <section className="bg-gradient-to-r from-blue-900 to-purple-800 rounded-2xl p-6 mb-8 text-center text-white">
              <h1 className="text-3xl md:text-4xl font-bold mb-4">Upgrade Your Lifestyle</h1>
              <p className="text-lg mb-6 max-w-2xl mx-auto">
                Deals on Smart TVs, MKOPA Phones, Fridges & Laptops. Real Prices. Real Quality.
              </p>
              <button 
                onClick={() => scrollToCategory(tvSectionRef)}
                className="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform transform hover:scale-105"
              >
                START SHOPPING
              </button>
            </section>
            
            {/* Categories */}
            {categories.map(category => (
              <div 
                key={category.id} 
                ref={category.ref}
                className="mb-12 scroll-mt-32"
              >
                <div className="flex justify-between items-center mb-6">
                  <h2 className="text-2xl font-bold text-blue-800">{category.title}</h2>
                  <span className="text-sm text-gray-600">{category.brands}</span>
                </div>
                
                {/* Ad placeholder */}
                <div className="bg-gray-800 rounded-xl h-48 mb-8 flex items-center justify-center">
                  <span className="text-white text-xl">üé• Your Promo Video Here</span>
                </div>
                
                {/* Product Grid */}
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                  {products[category.id].map(product => (
                    <div 
                      key={product.id} 
                      className="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                    >
                      {product.isFlashSale && (
                        <div className="absolute top-3 left-3 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">
                          FLASH SALE
                        </div>
                      )}
                      {product.isMkopa && (
                        <div className="absolute top-3 right-3 bg-green-600 text-white text-xs font-bold px-2 py-1 rounded">
                          MKOPA
                        </div>
                      )}
                      
                      <div className="p-4">
                        <div className="relative mb-4">
                          <div className="bg-gray-200 border-2 border-dashed rounded-xl w-full h-48" />
                          <button 
                            onClick={() => setSelectedProduct(product)}
                            className="absolute top-2 right-2 bg-white rounded-full p-1 shadow-md"
                          >
                            <Heart 
                              className={`w-5 h-5 ${wishlist.includes(product.id) ? 'text-red-500 fill-current' : 'text-gray-400'}`} 
                              onClick={(e) => {
                                e.stopPropagation();
                                toggleWishlist(product.id);
                              }}
                            />
                          </button>
                        </div>
                        
                        <div className="mb-2">
                          <span className="text-xs text-gray-500 uppercase">{product.brand}</span>
                          <h3 className="font-semibold text-gray-800 line-clamp-2">{product.name}</h3>
                        </div>
                        
                        <div className="flex items-center mb-3">
                          {product.isFlashSale ? (
                            <>
                              <span className="text-lg font-bold text-green-600">KSh {product.price.toLocaleString()}</span>
                              <span className="text-sm text-gray-500 line-through ml-2">KSh {product.originalPrice.toLocaleString()}</span>
                            </>
                          ) : (
                            <span className="text-lg font-bold text-blue-700">KSh {product.price.toLocaleString()}</span>
                          )}
                        </div>
                        
                        <button 
                          onClick={() => addToCart(product)}
                          className="w-full bg-gray-800 hover:bg-gray-700 text-white py-2 rounded-lg font-medium transition-colors"
                        >
                          ADD TO CART
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </>
        )}
        
        {/* Flash Sale Tab */}
        {activeTab === 'flash-sale' && (
          <div>
            <div className="text-center mb-8">
              <h2 className="text-3xl font-bold text-purple-700 mb-4">‚ö° FLASH SALE</h2>
              <p className="text-gray-600 mb-6">Limited time offers! Ends in:</p>
              
              <div className="flex justify-center space-x-4 mb-8">
                <div className="bg-purple-100 rounded-lg p-4 text-center min-w-[80px]">
                  <div className="text-2xl font-bold text-purple-700">{formatTime(timeLeft.hours)}</div>
                  <div className="text-sm text-gray-600">Hours</div>
                </div>
                <div className="bg-purple-100 rounded-lg p-4 text-center min-w-[80px]">
                  <div className="text-2xl font-bold text-purple-700">{formatTime(timeLeft.minutes)}</div>
                  <div className="text-sm text-gray-600">Minutes</div>
                </div>
                <div className="bg-purple-100 rounded-lg p-4 text-center min-w-[80px]">
                  <div className="text-2xl font-bold text-purple-700">{formatTime(timeLeft.seconds)}</div>
                  <div className="text-sm text-gray-600">Seconds</div>
                </div>
              </div>
            </div>
            
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              {flashSaleItems.map(product => (
                <div 
                  key={product.id} 
                  className="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                >
                  <div className="p-4">
                    <div className="relative mb-4">
                      <div className="bg-gray-200 border-2 border-dashed rounded-xl w-full h-48" />
                      <div className="absolute top-2 left-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">
                        FLASH SALE
                      </div>
                      <button 
                        onClick={() => setSelectedProduct(product)}
                        className="absolute top-2 right-2 bg-white rounded-full p-1 shadow-md"
                      >
                        <Heart 
                          className={`w-5 h-5 ${wishlist.includes(product.id) ? 'text-red-500 fill-current' : 'text-gray-400'}`} 
                          onClick={(e) => {
                            e.stopPropagation();
                            toggleWishlist(product.id);
                          }}
                        />
                      </button>
                    </div>
                    
                    <div className="mb-2">
                      <span className="text-xs text-gray-500 uppercase">{product.brand}</span>
                      <h3 className="font-semibold text-gray-800 line-clamp-2">{product.name}</h3>
                    </div>
                    
                    <div className="flex items-center mb-3">
                      <span className="text-lg font-bold text-green-600">KSh {product.price.toLocaleString()}</span>
                      <span className="text-sm text-gray-500 line-through ml-2">KSh {product.originalPrice.toLocaleString()}</span>
                    </div>
                    
                    <button 
                      onClick={() => addToCart(product)}
                      className="w-full bg-gray-800 hover:bg-gray-700 text-white py-2 rounded-lg font-medium transition-colors"
                    >
                      ADD TO CART
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
        
        {/* About Tab */}
        {activeTab === 'about' && (
          <div className="max-w-4xl mx-auto">
            <h2 className="text-3xl font-bold text-blue-800 text-center mb-8">Leadership & Vision</h2>
            
            <div className="bg-white rounded-2xl shadow-lg p-6 mb-8">
              <div className="flex flex-col md:flex-row gap-8">
                <div className="md:w-1/3 flex justify-center">
                  <div className="bg-gray-200 border-2 border-dashed rounded-full w-48 h-48 flex items-center justify-center">
                    <span className="text-gray-500">Benard Achila</span>
                  </div>
                </div>
                
                <div className="md:w-2/3">
                  <h3 className="text-2xl font-bold text-gray-800 mb-4">About Rosmatt Kenya</h3>
                  <p className="text-gray-700 mb-4">
                    Rosmatt Kenya is a leading e-commerce platform dedicated to bridging the digital divide in Kenya. 
                    We partner with global giants like TCL, Hisense, and Samsung to bring genuine products to your doorstep.
                  </p>
                  <p className="text-gray-700 mb-6">
                    We are authorized agents for MKOPA, allowing flexible payment plans for smartphones to empower every Kenyan.
                  </p>
                  
                  <div className="bg-blue-50 p-4 rounded-lg">
                    <p className="italic text-gray-700">
                      "At Rosmatt, we don't just sell electronics; we sell trust, quality, and a better lifestyle. 
                      Our commitment is to ensure every household in Kenya has access to modern technology."
                    </p>
                    <p className="font-bold mt-2">- Benard Achila, Founder & CEO</p>
                  </div>
                  
                  <a 
                    href="tel:0714227080" 
                    className="mt-6 inline-block bg-gray-800 text-white px-6 py-2 rounded-full font-medium hover:bg-gray-700 transition-colors"
                  >
                    Call CEO Office
                  </a>
                </div>
              </div>
            </div>
          </div>
        )}
        
        {/* Terms Tab */}
        {activeTab === 'terms' && (
          <div className="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-8">
            <h1 className="text-3xl font-bold text-blue-800 mb-6">Terms and Conditions</h1>
            
            <div className="space-y-6">
              <div>
                <h3 className="text-xl font-bold text-gray-800 mb-2">1. Orders & Payment</h3>
                <p className="text-gray-700">
                  All orders placed on Rosmatt Kenya are subject to availability. Payment is largely Pay on Delivery within 
                  Nairobi and its environs. Upcountry orders may require a deposit.
                </p>
              </div>
              
              <div>
                <h3 className="text-xl font-bold text-gray-800 mb-2">2. MKOPA Plans</h3>
                <p className="text-gray-700">
                  MKOPA devices require a valid National ID and a guarantor. Deposits must be paid directly to the 
                  paybill provided by our agents.
                </p>
              </div>
              
              <div>
                <h3 className="text-xl font-bold text-gray-800 mb-2">3. Returns & Warranty</h3>
                <p className="text-gray-700">
                  Electronics come with a 1-year manufacturer warranty (TCL, Hisense, Samsung). 
                  Refurbished laptops have a 3-month warranty.
                </p>
              </div>
            </div>
          </div>
        )}
        
        {/* Wishlist Tab */}
        {activeTab === 'wishlist' && (
          <div>
            <h2 className="text-3xl font-bold text-red-600 text-center mb-8">‚ù§Ô∏è Your Wishlist</h2>
            
            {wishlist.length === 0 ? (
              <div className="text-center py-12">
                <Heart className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                <p className="text-gray-600 text-lg">Your wishlist is empty</p>
                <button 
                  onClick={() => setActiveTab('home')}
                  className="mt-4 bg-blue-700 text-white px-6 py-2 rounded-full font-medium hover:bg-blue-600"
                >
                  Start Shopping
                </button>
              </div>
            ) : (
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {wishlist.map(id => {
                  const product = Object.values(products).flat().find(p => p.id === id);
                  return product ? (
                    <div 
                      key={product.id} 
                      className="bg-white rounded-xl shadow-md overflow-hidden"
                    >
                      <div className="p-4">
                        <div className="relative mb-4">
                          <div className="bg-gray-200 border-2 border-dashed rounded-xl w-full h-48" />
                          <button 
                            onClick={() => toggleWishlist(product.id)}
                            className="absolute top-2 right-2 bg-white rounded-full p-1 shadow-md"
                          >
                            <Heart className="w-5 h-5 text-red-500 fill-current" />
                          </button>
                        </div>
                        
                        <div className="mb-2">
                          <span className="text-xs text-gray-500 uppercase">{product.brand}</span>
                          <h3 className="font-semibold text-gray-800 line-clamp-2">{product.name}</h3>
                        </div>
                        
                        <div className="flex items-center mb-3">
                          <span className="text-lg font-bold text-blue-700">KSh {product.price.toLocaleString()}</span>
                        </div>
                        
                        <div className="flex gap-2">
                          <button 
                            onClick={() => addToCart(product)}
                            className="flex-1 bg-gray-800 hover:bg-gray-700 text-white py-2 rounded-lg font-medium transition-colors"
                          >
                            Add to Cart
                          </button>
                          <button 
                            onClick={() => toggleWishlist(product.id)}
                            className="bg-red-100 text-red-600 p-2 rounded-lg"
                          >
                            <X className="w-5 h-5" />
                          </button>
                        </div>
                      </div>
                    </div>
                  ) : null;
                })}
              </div>
            )}
          </div>
        )}
      </main>
      
      {/* Product Detail Modal */}
      {selectedProduct && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="p-6">
              <div className="flex justify-between items-start mb-4">
                <h2 className="text-2xl font-bold text-gray-800">{selectedProduct.name}</h2>
                <button 
                  onClick={() => setSelectedProduct(null)}
                  className="text-gray-500 hover:text-gray-700"
                >
                  <X className="w-6 h-6" />
                </button>
              </div>
              
              <div className="flex justify-center mb-6">
                <div className="bg-gray-200 border-2 border-dashed rounded-xl w-full h-64" />
              </div>
              
              <div className="mb-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-2">Description</h3>
                <p className="text-gray-700">{selectedProduct.description}</p>
              </div>
              
              <div className="mb-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-2">Specifications</h3>
                <ul className="grid grid-cols-1 sm:grid-cols-2 gap-2">
                  {selectedProduct.specs.map((spec, index) => (
                    <li key={index} className="flex items-start">
                      <span className="text-green-600 mr-2">‚úì</span>
                      <span className="text-gray-700">{spec}</span>
                    </li>
                  ))}
                </ul>
              </div>
              
              <div className="flex items-center justify-between mb-6">
                <div>
                  {selectedProduct.isFlashSale ? (
                    <div className="flex items-center">
                      <span className="text-2xl font-bold text-green-600">KSh {selectedProduct.price.toLocaleString()}</span>
                      <span className="text-lg text-gray-500 line-through ml-2">KSh {selectedProduct.originalPrice.toLocaleString()}</span>
                    </div>
                  ) : (
                    <span className="text-2xl font-bold text-blue-700">KSh {selectedProduct.price.toLocaleString()}</span>
                  )}
                </div>
                
                <div className="flex gap-2">
                  <button 
                    onClick={() => toggleWishlist(selectedProduct.id)}
                    className={`p-2 rounded-full ${wishlist.includes(selectedProduct.id) ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-600'}`}
                  >
                    <Heart className={`w-5 h-5 ${wishlist.includes(selectedProduct.id) ? 'fill-current' : ''}`} />
                  </button>
                </div>
              </div>
              
              <button 
                onClick={() => {
                  addToCart(selectedProduct);
                  setSelectedProduct(null);
                }}
                className="w-full bg-gray-800 hover:bg-gray-700 text-white py-3 rounded-lg font-bold text-lg transition-colors"
              >
                ADD TO CART
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Cart Modal */}
      {showCart && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-2xl max-w-md w-full max-h-[80vh] flex flex-col">
            <div className="p-4 border-b flex justify-between items-center">
              <h3 className="text-xl font-bold">Shopping Cart</h3>
              <button 
                onClick={() => setShowCart(false)}
                className="text-gray-500 hover:text-gray-700"
              >
                <X className="w-6 h-6" />
              </button>
            </div>
            
            <div className="flex-1 overflow-y-auto p-4">
              {cart.length === 0 ? (
                <div className="text-center py-8">
                  <ShoppingCart className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                  <p className="text-gray-600">Your cart is empty</p>
                </div>
              ) : (
                <div className="space-y-4">
                  {cart.map((item, index) => (
                    <div key={index} className="flex justify-between items-start pb-4 border-b">
                      <div>
                        <h4 className="font-medium">{item.name}</h4>
                        <p className="text-gray-600">KSh {item.price.toLocaleString()}</p>
                      </div>
                      <button 
                        onClick={() => removeFromCart(index)}
                        className="text-red-500 hover:text-red-700"
                      >
                        <X className="w-5 h-5" />
                      </button>
                    </div>
                  ))}
                </div>
              )}
            </div>
            
            {cart.length > 0 && (
              <div className="p-4 border-t">
                <div className="flex justify-between items-center mb-4">
                  <span className="font-bold">Total:</span>
                  <span className="text-xl font-bold text-green-600">
                    KSh {cart.reduce((sum, item) => sum + item.price, 0).toLocaleString()}
                  </span>
                </div>
                
                <button 
                  onClick={checkoutWhatsApp}
                  className="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold text-lg transition-colors"
                >
                  PLACE ORDER
                </button>
              </div>
            )}
          </div>
        </div>
      )}
      
      {/* Back to Top Button */}
      <button 
        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
        className="fixed bottom-6 right-6 bg-blue-700 text-white p-3 rounded-full shadow-lg hover:bg-blue-600 transition-colors z-40"
      >
        <ArrowUp className="w-5 h-5" />
      </button>
      
      {/* Intelligent Chat Button */}
      <button 
        onClick={() => window.open('https://wa.me/254714227080', '_blank')}
        className="fixed bottom-6 left-6 bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700 transition-colors z-40 flex items-center gap-2"
      >
        <MessageCircle className="w-5 h-5" />
        <span className="hidden md:inline">Chat with us</span>
      </button>
      
      {/* Footer */}
      <footer className="bg-gray-800 text-white py-8 mt-12">
        <div className="container mx-auto px-4 text-center">
          <p className="mb-4">roses are red, violets are blue</p>
          <p className="text-gray-400">¬© 2025 Rosmatt Kenya. All rights reserved.</p>
        </div>
      </footer>
    </div>
  );
};

export default App;
